{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Colledge%20study/Outfevibe-mvp-main/Outfevibe-mvp-main/src/app/suggestions/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useAuth } from \"@/context/authContext\";\nimport { supabase } from \"@/lib/supabase\";\n\n/* -------------------- TYPES -------------------- */\n\ninterface Outfit {\n  id: string;\n  title: string;\n  image: string;\n  description: string;\n}\n\n/* -------------------- PERSONA DATA -------------------- */\n\nconst PERSONA_OUTFITS: Record<string, Outfit[]> = {\n\n  \"Minimalist Maven\": [\n    {\n      id: \"mm1\",\n      title: \"Neutral Power\",\n      image: \"/suggestions/mm-1.jpg\",\n      description: \"Clean lines. Timeless vibe.\"\n    },\n    {\n      id: \"mm2\",\n      title: \"Soft Monochrome\",\n      image: \"/suggestions/mm-2.jpg\",\n      description: \"Understated elegance.\"\n    }\n  ],\n\n  \"Edgy Trendsetter\": [\n    {\n      id: \"et1\",\n      title: \"Street Rebel\",\n      image: \"/suggestions/et-1.jpg\",\n      description: \"Bold and fearless.\"\n    },\n    {\n      id: \"et2\",\n      title: \"Night Slay\",\n      image: \"/suggestions/et-2.jpg\",\n      description: \"Main character energy.\"\n    }\n  ],\n\n  \"Playful Creative\": [\n    {\n      id: \"pc1\",\n      title: \"Color Pop\",\n      image: \"/suggestions/pc-1.jpg\",\n      description: \"Fun meets fashion.\"\n    },\n    {\n      id: \"pc2\",\n      title: \"Art Girl\",\n      image: \"/suggestions/pc-2.jpg\",\n      description: \"Creative soul vibes.\"\n    }\n  ],\n\n  \"Romantic Softie\": [\n    {\n      id: \"rs1\",\n      title: \"Soft Pastel Dream\",\n      image: \"/suggestions/rs-1.jpg\",\n      description: \"Whimsical and gentle.\"\n    },\n    {\n      id: \"rs2\",\n      title: \"Cozy Romance\",\n      image: \"/suggestions/rs-2.jpg\",\n      description: \"Soft layered beauty.\"\n    }\n  ],\n\n  \"Comfort Queen\": [\n    {\n      id: \"cq1\",\n      title: \"Elevated Lounge\",\n      image: \"/suggestions/cq-1.jpg\",\n      description: \"Comfort but make it cute.\"\n    },\n    {\n      id: \"cq2\",\n      title: \"Chill Fit\",\n      image: \"/suggestions/cq-2.jpg\",\n      description: \"Relaxed and confident.\"\n    }\n  ],\n\n  \"Boho Spirit\": [\n    {\n      id: \"bs1\",\n      title: \"Earthy Vibes\",\n      image: \"/suggestions/bs-1.jpg\",\n      description: \"Free spirited energy.\"\n    },\n    {\n      id: \"bs2\",\n      title: \"Festival Queen\",\n      image: \"/suggestions/bs-2.jpg\",\n      description: \"Bohemian charm.\"\n    }\n  ],\n\n  \"Minimalist King\": [\n    {\n      id: \"mk1\",\n      title: \"Clean Authority\",\n      image: \"/suggestions/mk-1.jpg\",\n      description: \"Sharp and refined.\"\n    },\n    {\n      id: \"mk2\",\n      title: \"Neutral Boss\",\n      image: \"/suggestions/mk-2.jpg\",\n      description: \"Understated dominance.\"\n    }\n  ],\n\n  \"Streetwear Icon\": [\n    {\n      id: \"si1\",\n      title: \"Hype Drop\",\n      image: \"/suggestions/si-1.jpg\",\n      description: \"Street certified.\"\n    },\n    {\n      id: \"si2\",\n      title: \"Layer King\",\n      image: \"/suggestions/si-2.jpg\",\n      description: \"Urban edge.\"\n    }\n  ],\n\n  \"Modern Gentleman\": [\n    {\n      id: \"mg1\",\n      title: \"Smart Casual\",\n      image: \"/suggestions/mg-1.jpg\",\n      description: \"Classy but chill.\"\n    },\n    {\n      id: \"mg2\",\n      title: \"Evening Sharp\",\n      image: \"/suggestions/mg-2.jpg\",\n      description: \"Polished presence.\"\n    }\n  ],\n\n  \"Casual Cool\": [\n    {\n      id: \"cc1\",\n      title: \"Weekend Fit\",\n      image: \"/suggestions/cc-1.jpg\",\n      description: \"Effortless drip.\"\n    },\n    {\n      id: \"cc2\",\n      title: \"Denim Classic\",\n      image: \"/suggestions/cc-2.jpg\",\n      description: \"Simple but strong.\"\n    }\n  ],\n\n  \"Athleisure Pro\": [\n    {\n      id: \"ap1\",\n      title: \"Gym Street\",\n      image: \"/suggestions/ap-1.jpg\",\n      description: \"Performance meets fashion.\"\n    },\n    {\n      id: \"ap2\",\n      title: \"Sport Luxe\",\n      image: \"/suggestions/ap-2.jpg\",\n      description: \"Comfort domination.\"\n    }\n  ],\n\n  \"Urban Explorer\": [\n    {\n      id: \"ue1\",\n      title: \"Adventure Core\",\n      image: \"/suggestions/ue-1.jpg\",\n      description: \"Functional and stylish.\"\n    },\n    {\n      id: \"ue2\",\n      title: \"Rugged Layer\",\n      image: \"/suggestions/ue-2.jpg\",\n      description: \"Outdoor ready.\"\n    }\n  ]\n};\n\n/* -------------------- COMPONENT -------------------- */\n\nexport default function SuggestionsPage() {\n\n  const { user } = useAuth();\n  const [persona, setPersona] = useState<string | null>(null);\n  const [saved, setSaved] = useState<Set<string>>(new Set());\n\n  useEffect(() => {\n    const storedPersona = localStorage.getItem(\"userPersona\");\n    setPersona(storedPersona);\n  }, []);\n\n  // Load previously saved suggestion outfits from Supabase\n  useEffect(() => {\n    if (!user) return;\n    const loadSaved = async () => {\n      const { data, error } = await supabase\n        .from(\"ai_outfit_images\")\n        .select(\"ai_suggestion\")\n        .eq(\"user_id\", user.id);\n      if (!error && data) {\n        const ids = new Set<string>(\n          data\n            .map((row: any) => {\n              const match = row.ai_suggestion?.match(/\\[SID:([^\\]]+)\\]/);\n              return match ? match[1] : null;\n            })\n            .filter(Boolean) as string[]\n        );\n        setSaved(ids);\n      }\n    };\n    loadSaved();\n  }, [user]);\n\n  const toggleSave = async (outfit: Outfit) => {\n    const isSaved = saved.has(outfit.id);\n\n    if (isSaved) {\n      // Unsave\n      setSaved((prev) => {\n        const next = new Set(prev);\n        next.delete(outfit.id);\n        return next;\n      });\n      if (user) {\n        const { error } = await supabase\n          .from(\"ai_outfit_images\")\n          .delete()\n          .eq(\"user_id\", user.id)\n          .like(\"ai_suggestion\", `%[SID:${outfit.id}]%`);\n        if (error) console.error(\"Error removing saved outfit:\", error);\n      }\n    } else {\n      // Save\n      setSaved((prev) => new Set(prev).add(outfit.id));\n      if (user) {\n        const { error } = await supabase.from(\"ai_outfit_images\").insert({\n          user_id: user.id,\n          image_url: outfit.image,\n          ai_suggestion: `${outfit.title} - ${outfit.description} [SID:${outfit.id}]`,\n        });\n        if (error) console.error(\"Error saving outfit:\", error);\n      }\n    }\n  };\n\n  if (!persona) {\n    return (\n      <div className=\"min-h-screen bg-black text-white flex items-center justify-center\">\n        Loading your style...\n      </div>\n    );\n  }\n\n  const outfits = PERSONA_OUTFITS[persona] || [];\n\n  return (\n    <div className=\"min-h-screen bg-black text-white px-6 py-20\">\n      <div className=\"max-w-6xl mx-auto\">\n\n        <div className=\"text-center mb-16\">\n          <h1 className=\"text-4xl font-bold\">\n            Your Curated Fits\n          </h1>\n          <p className=\"text-gray-400 mt-3\">\n            Persona: {persona}\n          </p>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-10\">\n          {outfits.map((outfit) => (\n            <div\n              key={outfit.id}\n              className=\"bg-[#111] border border-[#1f1f1f] rounded-2xl overflow-hidden hover:border-white transition\"\n            >\n              <img\n                src={outfit.image}\n                alt={outfit.title}\n                className=\"w-full h-64 object-cover\"\n              />\n\n              <div className=\"p-6\">\n                <h2 className=\"text-xl font-semibold mb-2\">\n                  {outfit.title}\n                </h2>\n                <p className=\"text-gray-400 text-sm mb-4\">\n                  {outfit.description}\n                </p>\n\n                <button\n                  onClick={() => toggleSave(outfit)}\n                  className={`px-5 py-2 rounded-full text-sm border transition ${saved.has(outfit.id)\n                    ? \"bg-white text-black border-white\"\n                    : \"border-gray-600 hover:border-white\"\n                    }`}\n                >\n                  {saved.has(outfit.id) ? \"âœ“ Saved\" : \"Save\"}\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;;;AALA;;;;AAgBA,0DAA0D,GAE1D,MAAM,kBAA4C;IAEhD,oBAAoB;QAClB;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;QACA;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;KACD;IAED,oBAAoB;QAClB;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;QACA;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;KACD;IAED,oBAAoB;QAClB;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;QACA;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;KACD;IAED,mBAAmB;QACjB;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;QACA;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;KACD;IAED,iBAAiB;QACf;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;QACA;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;KACD;IAED,eAAe;QACb;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;QACA;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;KACD;IAED,mBAAmB;QACjB;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;QACA;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;KACD;IAED,mBAAmB;QACjB;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;QACA;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;KACD;IAED,oBAAoB;QAClB;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;QACA;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;KACD;IAED,eAAe;QACb;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;QACA;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;KACD;IAED,kBAAkB;QAChB;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;QACA;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;KACD;IAED,kBAAkB;QAChB;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;QACA;YACE,IAAI;YACJ,OAAO;YACP,OAAO;YACP,aAAa;QACf;KACD;AACH;AAIe,SAAS;;IAEtB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,4IAAO;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAgB;IACtD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAc,IAAI;IAEpD,IAAA,0KAAS;qCAAC;YACR,MAAM,gBAAgB,aAAa,OAAO,CAAC;YAC3C,WAAW;QACb;oCAAG,EAAE;IAEL,yDAAyD;IACzD,IAAA,0KAAS;qCAAC;YACR,IAAI,CAAC,MAAM;YACX,MAAM;uDAAY;oBAChB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,qIAAQ,CACnC,IAAI,CAAC,oBACL,MAAM,CAAC,iBACP,EAAE,CAAC,WAAW,KAAK,EAAE;oBACxB,IAAI,CAAC,SAAS,MAAM;wBAClB,MAAM,MAAM,IAAI,IACd,KACG,GAAG;mEAAC,CAAC;gCACJ,MAAM,QAAQ,IAAI,aAAa,EAAE,MAAM;gCACvC,OAAO,QAAQ,KAAK,CAAC,EAAE,GAAG;4BAC5B;kEACC,MAAM,CAAC;wBAEZ,SAAS;oBACX;gBACF;;YACA;QACF;oCAAG;QAAC;KAAK;IAET,MAAM,aAAa,OAAO;QACxB,MAAM,UAAU,MAAM,GAAG,CAAC,OAAO,EAAE;QAEnC,IAAI,SAAS;YACX,SAAS;YACT,SAAS,CAAC;gBACR,MAAM,OAAO,IAAI,IAAI;gBACrB,KAAK,MAAM,CAAC,OAAO,EAAE;gBACrB,OAAO;YACT;YACA,IAAI,MAAM;gBACR,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,qIAAQ,CAC7B,IAAI,CAAC,oBACL,MAAM,GACN,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;gBAC/C,IAAI,OAAO,QAAQ,KAAK,CAAC,gCAAgC;YAC3D;QACF,OAAO;YACL,OAAO;YACP,SAAS,CAAC,OAAS,IAAI,IAAI,MAAM,GAAG,CAAC,OAAO,EAAE;YAC9C,IAAI,MAAM;gBACR,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,qIAAQ,CAAC,IAAI,CAAC,oBAAoB,MAAM,CAAC;oBAC/D,SAAS,KAAK,EAAE;oBAChB,WAAW,OAAO,KAAK;oBACvB,eAAe,GAAG,OAAO,KAAK,CAAC,GAAG,EAAE,OAAO,WAAW,CAAC,MAAM,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC;gBAC7E;gBACA,IAAI,OAAO,QAAQ,KAAK,CAAC,wBAAwB;YACnD;QACF;IACF;IAEA,IAAI,CAAC,SAAS;QACZ,qBACE,6LAAC;YAAI,WAAU;sBAAoE;;;;;;IAIvF;IAEA,MAAM,UAAU,eAAe,CAAC,QAAQ,IAAI,EAAE;IAE9C,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAAqB;;;;;;sCAGnC,6LAAC;4BAAE,WAAU;;gCAAqB;gCACtB;;;;;;;;;;;;;8BAId,6LAAC;oBAAI,WAAU;8BACZ,QAAQ,GAAG,CAAC,CAAC,uBACZ,6LAAC;4BAEC,WAAU;;8CAEV,6LAAC;oCACC,KAAK,OAAO,KAAK;oCACjB,KAAK,OAAO,KAAK;oCACjB,WAAU;;;;;;8CAGZ,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAG,WAAU;sDACX,OAAO,KAAK;;;;;;sDAEf,6LAAC;4CAAE,WAAU;sDACV,OAAO,WAAW;;;;;;sDAGrB,6LAAC;4CACC,SAAS,IAAM,WAAW;4CAC1B,WAAW,CAAC,iDAAiD,EAAE,MAAM,GAAG,CAAC,OAAO,EAAE,IAC9E,qCACA,sCACA;sDAEH,MAAM,GAAG,CAAC,OAAO,EAAE,IAAI,YAAY;;;;;;;;;;;;;2BAxBnC,OAAO,EAAE;;;;;;;;;;;;;;;;;;;;;AAkC5B;GA9HwB;;QAEL,4IAAO;;;KAFF"}}]
}