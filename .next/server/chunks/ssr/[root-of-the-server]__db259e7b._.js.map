{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../src/app/suggestions/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useAuth } from \"@/context/authContext\";\nimport { supabase } from \"@/lib/supabase\";\n\n/* -------------------- TYPES -------------------- */\n\ninterface Outfit {\n  id: string;\n  title: string;\n  image: string;\n  description: string;\n}\n\n/* -------------------- PERSONA DATA -------------------- */\n\nconst PERSONA_OUTFITS: Record<string, Outfit[]> = {\n\n  \"Minimalist Maven\": [\n    {\n      id: \"mm1\",\n      title: \"Neutral Power\",\n      image: \"/suggestions/mm-1.jpg\",\n      description: \"Clean lines. Timeless vibe.\"\n    },\n    {\n      id: \"mm2\",\n      title: \"Soft Monochrome\",\n      image: \"/suggestions/mm-2.jpg\",\n      description: \"Understated elegance.\"\n    }\n  ],\n\n  \"Edgy Trendsetter\": [\n    {\n      id: \"et1\",\n      title: \"Street Rebel\",\n      image: \"/suggestions/et-1.jpg\",\n      description: \"Bold and fearless.\"\n    },\n    {\n      id: \"et2\",\n      title: \"Night Slay\",\n      image: \"/suggestions/et-2.jpg\",\n      description: \"Main character energy.\"\n    }\n  ],\n\n  \"Playful Creative\": [\n    {\n      id: \"pc1\",\n      title: \"Color Pop\",\n      image: \"/suggestions/pc-1.jpg\",\n      description: \"Fun meets fashion.\"\n    },\n    {\n      id: \"pc2\",\n      title: \"Art Girl\",\n      image: \"/suggestions/pc-2.jpg\",\n      description: \"Creative soul vibes.\"\n    }\n  ],\n\n  \"Romantic Softie\": [\n    {\n      id: \"rs1\",\n      title: \"Soft Pastel Dream\",\n      image: \"/suggestions/rs-1.jpg\",\n      description: \"Whimsical and gentle.\"\n    },\n    {\n      id: \"rs2\",\n      title: \"Cozy Romance\",\n      image: \"/suggestions/rs-2.jpg\",\n      description: \"Soft layered beauty.\"\n    }\n  ],\n\n  \"Comfort Queen\": [\n    {\n      id: \"cq1\",\n      title: \"Elevated Lounge\",\n      image: \"/suggestions/cq-1.jpg\",\n      description: \"Comfort but make it cute.\"\n    },\n    {\n      id: \"cq2\",\n      title: \"Chill Fit\",\n      image: \"/suggestions/cq-2.jpg\",\n      description: \"Relaxed and confident.\"\n    }\n  ],\n\n  \"Boho Spirit\": [\n    {\n      id: \"bs1\",\n      title: \"Earthy Vibes\",\n      image: \"/suggestions/bs-1.jpg\",\n      description: \"Free spirited energy.\"\n    },\n    {\n      id: \"bs2\",\n      title: \"Festival Queen\",\n      image: \"/suggestions/bs-2.jpg\",\n      description: \"Bohemian charm.\"\n    }\n  ],\n\n  \"Minimalist King\": [\n    {\n      id: \"mk1\",\n      title: \"Clean Authority\",\n      image: \"/suggestions/mk-1.jpg\",\n      description: \"Sharp and refined.\"\n    },\n    {\n      id: \"mk2\",\n      title: \"Neutral Boss\",\n      image: \"/suggestions/mk-2.jpg\",\n      description: \"Understated dominance.\"\n    }\n  ],\n\n  \"Streetwear Icon\": [\n    {\n      id: \"si1\",\n      title: \"Hype Drop\",\n      image: \"/suggestions/si-1.jpg\",\n      description: \"Street certified.\"\n    },\n    {\n      id: \"si2\",\n      title: \"Layer King\",\n      image: \"/suggestions/si-2.jpg\",\n      description: \"Urban edge.\"\n    }\n  ],\n\n  \"Modern Gentleman\": [\n    {\n      id: \"mg1\",\n      title: \"Smart Casual\",\n      image: \"/suggestions/mg-1.jpg\",\n      description: \"Classy but chill.\"\n    },\n    {\n      id: \"mg2\",\n      title: \"Evening Sharp\",\n      image: \"/suggestions/mg-2.jpg\",\n      description: \"Polished presence.\"\n    }\n  ],\n\n  \"Casual Cool\": [\n    {\n      id: \"cc1\",\n      title: \"Weekend Fit\",\n      image: \"/suggestions/cc-1.jpg\",\n      description: \"Effortless drip.\"\n    },\n    {\n      id: \"cc2\",\n      title: \"Denim Classic\",\n      image: \"/suggestions/cc-2.jpg\",\n      description: \"Simple but strong.\"\n    }\n  ],\n\n  \"Athleisure Pro\": [\n    {\n      id: \"ap1\",\n      title: \"Gym Street\",\n      image: \"/suggestions/ap-1.jpg\",\n      description: \"Performance meets fashion.\"\n    },\n    {\n      id: \"ap2\",\n      title: \"Sport Luxe\",\n      image: \"/suggestions/ap-2.jpg\",\n      description: \"Comfort domination.\"\n    }\n  ],\n\n  \"Urban Explorer\": [\n    {\n      id: \"ue1\",\n      title: \"Adventure Core\",\n      image: \"/suggestions/ue-1.jpg\",\n      description: \"Functional and stylish.\"\n    },\n    {\n      id: \"ue2\",\n      title: \"Rugged Layer\",\n      image: \"/suggestions/ue-2.jpg\",\n      description: \"Outdoor ready.\"\n    }\n  ]\n};\n\n/* -------------------- COMPONENT -------------------- */\n\nexport default function SuggestionsPage() {\n\n  const { user } = useAuth();\n  const router = useRouter();\n  const [persona, setPersona] = useState<string | null>(null);\n  const [saved, setSaved] = useState<Set<string>>(new Set());\n\n  useEffect(() => {\n    const storedPersona = localStorage.getItem(\"userPersona\");\n    setPersona(storedPersona);\n  }, []);\n\n  // Load previously saved suggestion outfits from Supabase\n  useEffect(() => {\n    if (!user) return;\n    const loadSaved = async () => {\n      const { data, error } = await supabase\n        .from(\"ai_outfit_images\")\n        .select(\"ai_suggestion\")\n        .eq(\"user_id\", user.id);\n      if (!error && data) {\n        const ids = new Set<string>(\n          data\n            .map((row: any) => {\n              const match = row.ai_suggestion?.match(/\\[SID:([^\\]]+)\\]/);\n              return match ? match[1] : null;\n            })\n            .filter(Boolean) as string[]\n        );\n        setSaved(ids);\n      }\n    };\n    loadSaved();\n  }, [user]);\n\n  const toggleSave = async (outfit: Outfit) => {\n    const isSaved = saved.has(outfit.id);\n\n    if (isSaved) {\n      // Unsave\n      setSaved((prev) => {\n        const next = new Set(prev);\n        next.delete(outfit.id);\n        return next;\n      });\n      if (user) {\n        const { error } = await supabase\n          .from(\"ai_outfit_images\")\n          .delete()\n          .eq(\"user_id\", user.id)\n          .like(\"ai_suggestion\", `%[SID:${outfit.id}]%`);\n        if (error) console.error(\"Error removing saved outfit:\", error);\n      }\n    } else {\n      // Save\n      setSaved((prev) => new Set(prev).add(outfit.id));\n      if (user) {\n        const { error } = await supabase.from(\"ai_outfit_images\").insert({\n          user_id: user.id,\n          image_url: outfit.image,\n          ai_suggestion: `${outfit.title} - ${outfit.description} [SID:${outfit.id}]`,\n        });\n        if (error) console.error(\"Error saving outfit:\", error);\n      }\n    }\n  };\n\n  if (!persona) {\n    return (\n      <div className=\"min-h-screen bg-black text-white flex items-center justify-center\">\n        Loading your style...\n      </div>\n    );\n  }\n\n  const outfits = PERSONA_OUTFITS[persona] || [];\n\n  return (\n    <div className=\"min-h-screen bg-black text-white px-6 py-20\">\n      <div className=\"max-w-6xl mx-auto\">\n\n        <div className=\"text-center mb-16\">\n          <h1 className=\"text-4xl font-bold\">\n            Your Curated Fits\n          </h1>\n          <p className=\"text-gray-400 mt-3\">\n            Persona: {persona}\n          </p>\n          <button\n            onClick={() => router.push(\"/\")}\n            className=\"mt-4 text-gray-500 hover:text-white text-sm transition\"\n          >\n            üè† Go Home\n          </button>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-10\">\n          {outfits.map((outfit) => (\n            <div\n              key={outfit.id}\n              className=\"bg-[#111] border border-[#1f1f1f] rounded-2xl overflow-hidden hover:border-white transition\"\n            >\n              <img\n                src={outfit.image}\n                alt={outfit.title}\n                className=\"w-full h-64 object-cover\"\n              />\n\n              <div className=\"p-6\">\n                <h2 className=\"text-xl font-semibold mb-2\">\n                  {outfit.title}\n                </h2>\n                <p className=\"text-gray-400 text-sm mb-4\">\n                  {outfit.description}\n                </p>\n\n                <button\n                  onClick={() => toggleSave(outfit)}\n                  className={`px-5 py-2 rounded-full text-sm border transition ${saved.has(outfit.id)\n                    ? \"bg-white text-black border-white\"\n                    : \"border-gray-600 hover:border-white\"\n                    }`}\n                >\n                  {saved.has(outfit.id) ? \"‚úì Saved\" : \"Save\"}\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n\n      </div>\n    </div>\n  );\n}\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"+iBAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACC,gBAAgB,+BCFvCJ,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACE,kBAAkB,8BCFzCL,GAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACG,kBAAkB,0CCAzC,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAaA,IAAM,EAA4C,CAEhD,mBAAoB,CAClB,CACE,GAAI,MACJ,MAAO,gBACP,MAAO,wBACP,YAAa,6BACf,EACA,CACE,GAAI,MACJ,MAAO,kBACP,MAAO,wBACP,YAAa,uBACf,EACD,CAED,mBAAoB,CAClB,CACE,GAAI,MACJ,MAAO,eACP,MAAO,wBACP,YAAa,oBACf,EACA,CACE,GAAI,MACJ,MAAO,aACP,MAAO,wBACP,YAAa,wBACf,EACD,CAED,mBAAoB,CAClB,CACE,GAAI,MACJ,MAAO,YACP,MAAO,wBACP,YAAa,oBACf,EACA,CACE,GAAI,MACJ,MAAO,WACP,MAAO,wBACP,YAAa,sBACf,EACD,CAED,kBAAmB,CACjB,CACE,GAAI,MACJ,MAAO,oBACP,MAAO,wBACP,YAAa,uBACf,EACA,CACE,GAAI,MACJ,MAAO,eACP,MAAO,wBACP,YAAa,sBACf,EACD,CAED,gBAAiB,CACf,CACE,GAAI,MACJ,MAAO,kBACP,MAAO,wBACP,YAAa,2BACf,EACA,CACE,GAAI,MACJ,MAAO,YACP,MAAO,wBACP,YAAa,wBACf,EACD,CAED,cAAe,CACb,CACE,GAAI,MACJ,MAAO,eACP,MAAO,wBACP,YAAa,uBACf,EACA,CACE,GAAI,MACJ,MAAO,iBACP,MAAO,wBACP,YAAa,iBACf,EACD,CAED,kBAAmB,CACjB,CACE,GAAI,MACJ,MAAO,kBACP,MAAO,wBACP,YAAa,oBACf,EACA,CACE,GAAI,MACJ,MAAO,eACP,MAAO,wBACP,YAAa,wBACf,EACD,CAED,kBAAmB,CACjB,CACE,GAAI,MACJ,MAAO,YACP,MAAO,wBACP,YAAa,mBACf,EACA,CACE,GAAI,MACJ,MAAO,aACP,MAAO,wBACP,YAAa,aACf,EACD,CAED,mBAAoB,CAClB,CACE,GAAI,MACJ,MAAO,eACP,MAAO,wBACP,YAAa,mBACf,EACA,CACE,GAAI,MACJ,MAAO,gBACP,MAAO,wBACP,YAAa,oBACf,EACD,CAED,cAAe,CACb,CACE,GAAI,MACJ,MAAO,cACP,MAAO,wBACP,YAAa,kBACf,EACA,CACE,GAAI,MACJ,MAAO,gBACP,MAAO,wBACP,YAAa,oBACf,EACD,CAED,iBAAkB,CAChB,CACE,GAAI,MACJ,MAAO,aACP,MAAO,wBACP,YAAa,4BACf,EACA,CACE,GAAI,MACJ,MAAO,aACP,MAAO,wBACP,YAAa,qBACf,EACD,CAED,iBAAkB,CAChB,CACE,GAAI,MACJ,MAAO,iBACP,MAAO,wBACP,YAAa,yBACf,EACA,CACE,GAAI,MACJ,MAAO,eACP,MAAO,wBACP,YAAa,gBACf,EACD,AACH,EAIe,SAAS,IAEtB,GAAM,MAAE,CAAI,CAAE,CAAG,CAAA,EAAA,EAAA,OAAO,AAAP,IACX,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAChD,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAsB,IAAI,KAEpD,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAER,EADsB,SACX,IADwB,OAAO,CAAC,eAE7C,EAAG,EAAE,EAGL,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,AAAK,GAkBL,CAlBI,AACc,EADP,QAET,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CACnC,IAAI,CAAC,oBACL,MAAM,CAAC,iBACP,EAAE,CAAC,UAAW,EAAK,EAAE,CACpB,EAAC,GAAS,GASZ,EARY,CADM,GACF,GAQP,CAPP,EACG,GAAG,CAAC,AAAC,IACJ,IAAM,EAAQ,EAAI,aAAa,EAAE,MAAM,oBACvC,OAAO,EAAQ,CAAK,CAAC,EAAE,CAAG,IAC5B,GACC,MAAM,CAAC,WAIhB,GAEF,EAAG,CAAC,EAAK,EAET,IAAM,EAAa,MAAO,IAGxB,GAFgB,CAEZ,CAFkB,GAAG,CAAC,EAAO,EAAE,AAEtB,GAOX,GALA,EAAS,AAAC,IACR,IAAM,EAAO,IAAI,IAAI,GAErB,OADA,EAAK,MAAM,CAAC,EAAO,EAAE,EACd,CACT,GACI,EAAM,CACR,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CAC7B,IAAI,CAAC,oBACL,MAAM,GACN,EAAE,CAAC,UAAW,EAAK,EAAE,EACrB,IAAI,CAAC,gBAAiB,CAAC,MAAM,EAAE,EAAO,EAAE,CAAC,EAAE,CAAC,EAC3C,GAAO,QAAQ,KAAK,CAAC,+BAAgC,GAC3D,MAIA,GADA,EAAS,AAAC,GAAS,IAAI,IAAI,GAAM,GAAG,CAAC,EAAO,EAAE,GAC1C,EAAM,CACR,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CAAC,IAAI,CAAC,oBAAoB,MAAM,CAAC,CAC/D,QAAS,EAAK,EAAE,CAChB,UAAW,EAAO,KAAK,CACvB,cAAe,CAAA,EAAG,EAAO,KAAK,CAAC,GAAG,EAAE,EAAO,WAAW,CAAC,MAAM,EAAE,EAAO,EAAE,CAAC,CAAC,CAAC,AAC7E,GACI,GAAO,QAAQ,KAAK,CAAC,uBAAwB,EACnD,CAEJ,EAEA,GAAI,CAAC,EACH,MACE,CAFU,AAEV,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6EAAoE,0BAMvF,IAAM,EAAU,CAAe,CAAC,EAAQ,EAAI,EAAE,CAE9C,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8BAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,sBAGnC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,+BAAqB,YACtB,KAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAO,IAAI,CAAC,KAC3B,UAAU,kEACX,kBAKH,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sCACZ,EAAQ,GAAG,CAAC,AAAC,GACZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAU,wGAEV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EAAO,KAAK,CACjB,IAAK,EAAO,KAAK,CACjB,UAAU,6BAGZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,sCACX,EAAO,KAAK,GAEf,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCACV,EAAO,WAAW,GAGrB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAW,GAC1B,UAAW,CAAC,iDAAiD,EAAE,EAAM,GAAG,CAAC,EAAO,EAAE,EAC9E,mCACA,qCAAA,CACA,UAEH,EAAM,GAAG,CAAC,EAAO,EAAE,EAAI,UAAY,cAxBnC,EAAO,EAAE,SAkC5B","ignoreList":[0,1,2]}